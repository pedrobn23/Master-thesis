
\chapter{Curry-Howard-Lambeck bijection}
\thispagestyle{empty}
In these chapter we raise bridges between Category Theory, $\lambda$-calculus, and Propositional logic. The main sources for this chapter were  \cite{lambek1988introduction}, \cite{lambek1985cartesian} and \cite[Chapter 6]{selinger2008lecture}.\\


\section{Deduction systems}
Having introduced the notion $\lambda$-calculus, category theory and propositional intuitionistic calculus, is time to have a step back, in other to get the full picture.

\begin{definition}
  A \emph{Deductive system} $D$ is a graph  with identity and composition of arrows.
\end{definition}

We can reformulated the previous logic with this optic. Prior to that we will make an illustrative example on how is this made. All the properties aforementioned (and paired) show that the requirements of typing/intuitionistics calculus can be expressed in just requirements for the arrows. For example, 
\begin{example}
  \begin{enumerate}
  \item Deduction rule $\to_1$: There is an arrow $$\varepsilon_{A,B}: [B\land (B \to A)] \to A.$$
  \item From deduction rule $\to_2$ it can be deduced:
    \begin{align*}
      \Gamma,\{\} \vdash & F= (C\land B)\to A;\\
      \Gamma, \{(C\land B)\} \vdash & A;\\
      \Gamma, \{C, B\} \vdash & A;\\
      \Gamma, \{C\} \vdash & B\to A;\\
      \Gamma, \{\} \vdash & F'=C \to (B \to A).
    \end{align*}
    That is provided an arrow $h: C\land B \to A$ there is an induced arrow
    $$h^*:C \to [A\to B].$$
  \end{enumerate}
\end{example}

We can unpack a bit from these notions. To begin with, we can check that the second example include an idea, much needed, in the relationship between assumption and deduction systems. We can view each assumption of truth as a new deduction system. This also seems logical, since an assumption $\Gamma = \{A_i : i=1,...,n\}$  with $A_i$ formulas can be seen as an existence of an arrow $g_i: \top \to A_i$.\\

We see that in our derivations we sometimes need to change the truth-assumption $\Gamma$. This is not mandatory, but it is useful to avoid including a large number of rules. However we do that in a way such that we start from a given $\Gamma$ and return to it at the end of the derivation. Thus knowing that if a $\Gamma$ derives the formula $F$, then it also derives the formula $F'$ and therefore there is an arrow in our deductive system. Similar reflections can be made with the rest of the rules discussed in the previous sections, and of course with the simply typed $\lambda$-calculus. \\



\subsection{Logical Systems as Deduction systems}
In  the fashion of previous definitions we can reformulate the logical systems as deduction systems.\\
\begin{definition}
  A conjunction calculus is a deductive system $D$ where there is a specified object $\top$ and an operation $\land: Ob(D)\times Ob(D) \to Ob(D)$ such that:
  \begin{enumerate}
  \item For each $A\in Ob(D)$ exists $O_A:A\to \top$.
  \item For each $A_1,A_2\in Ob(D)$ exists arrows $\pi_i^{A_1,A_2}: A_1 \land A_2 \to A_i$ for $i=1,2$.
  \item Let $f:C\to A$ and $g:C\to B$. Then $\langle f,g\rangle C\to A\land B$.
  \end{enumerate}
\end{definition}

Note that $\pi_i^{A_1,A_2}$ depend on both $A_1,A_2$. in the absence of ambiguity we will denote this arrow by $\pi_i$.

\begin{definition} \label{def:positivecalculus}
  A positive intuitionistic calculus is a conjunction calculus $D$ where there is binary an operator $\to: Ob(D)\times Ob(D) \to Ob(D)$ such that:
  \begin{enumerate}
  \item For each $A,B \in Ob(D)$, there is an arrow $\varepsilon^{A,B}: [(B \to A) \land B]\to A$.
  \item For each $g:C\land B \to A$ then there is an arrow $g^*: C\to [B\to A]$.
  \end{enumerate}
\end{definition}
\begin{remark}
  Note that we use $[]$ to avoid ambiguity between $\to$ as operator or as simply an arrow.
\end{remark}
Similarly to $\pi_i$, we will usually denote just $\varepsilon$. 
\begin{definition}
  A \emph{intuitionistic propositional calculus} is a positive intuitionistic calculus where there is a specified object $\bot$ and an operation $\lor: Ob(D)\times Ob(D) \to Ob(D)$ such that:
  \begin{enumerate}
  \item For each $A\in Ob(D)$ there is an arrow $\square_A: \Bot\to A$.
  \item For each $A_1,A_2\in Ob(D)$ there are arrows $\iin_i: A_i\to A_1 \lor A_2 $.
  \item For each $A,B,C \in Ob(D)$ there is an arrow $$h:[(B\to A)\land (C\to A)] \to [(C\lor B)\to A].$$
  \end{enumerate}
\end{definition}

\subsection{Categorical systems as Deduction systems}

We have already note how a category is a particular case of a deduction system. We can consider how are the logical systems, but we only select those who are also categories.\\

\begin{remark} {\color{red} Define $\langle f_1,f_2\rangle$ and $[f_1,f_2]$}
  
\end{remark}


\begin{proposition}
  A cartesian category $\mathcal{C}$ is a deduction system that is both conjunction system and a category where:
  \begin{enumerate}
  \item $f:A\to T\implies f=O_A$.
  \item Given $\langle f_1,f_2\rangle: C\to A\land B$ then $\pi_i \circ \langle f_1,f_2\rangle = f_i$.
  \item Given $h:C\to A\land B$ we have that $\langle \pi_1 h, \pi_2 h\rangle = h$.
  \end{enumerate}
\end{proposition}

\begin{proof}

  Lets begin by proving that a cartesian category satisfy this conditions. It is clearly a category. Using the specified terminal point $T=\Top$.  Considering the product $A\times B = A\land B$ for every $A,B \in C$ along with the projections, the others properties are satisfied.\\

  Conversely, considering again $T= \top$ we can check that it is a terminal object. Also, for every $h:C\to A\land B$we can see that every $h$ derive the existence of unique $f_1,f_2$ such that:
  \[
    \begin{tikzcd}
      {} & C \arrow[bend right,swap,dashed]{dl}{g}
      \arrow[bend left,dashed]{dr}{h} \arrow{d}[description]{f}& & \\
      A  &A\land B \arrow{l}[swap]{\pi_1} \arrow{r}{\pi_2} & 
      B \\
    \end{tikzcd}
  \]
  And thus we have finite product.
\end{proof}

Thus, we can start seeing the kind of bijection already shown in the Curry Howard Isomorphism. Hitherto we can adopt the notation $A\times B$ for the conjunction, in the context of cartesian categories.
\begin{proposition}\label{def2:CCC}
  A closed cartesian category $\mathcal{C}$ is a deduction system that is a positive intuitionistic calculus that is also a category such that:
  \begin{enumerate}
  \item   For all $h: C\times B \to A$ , we have that $\varepsilon \langle h^* \pi_1, \pi_2\rangle = h$.
  \item   For all $k: C\to [B \to A]$ , we have that $(\varepsilon \langle k \pi_1, \pi_2\rangle)^* = k$.
  \end{enumerate}
\end{proposition}

\begin{proof}
  
  Lets begin checking that $\mathcal{C}$ is a positive intuitionistic calculus and holds 1. and 2. As it is a cartesian category, by it does satisfy the requirements for being a conjunction calculus. Pairing the exponential object $cA^B$ with the function object $B\to A$. As in definition \ref{def:CCC}, we have  3 adjoints, the first two of them are already considered as we have that $C$ is a cartesian category. We now study the third of them and remember that $F_3^B=F$ and $G_3^B=G$ are both adjoint, i.e.:
  $$\hom_C(C \times B, A) \equiv \hom(C, A^B)$$

  Therefore, we can check the second part in definition \ref{def:positivecalculus}. Then, remembering proposition \ref{prop:univAdjoint}, we can deduce the existence of a natural transformation  $\varepsilon: FG \to I_C$ i.e. $\varepsilon: A^B\times A = (B\to A)\land A \to A$, having the first part in definition \ref{def:positivecalculus}.\\

  The proof of 1. and 2. are conditions of universality. Lets unpack 1. as 2. is the same reasoning on the other side of the adjoint. We have (remember that, in the notation of part I: $\langle h^*\pi_1, \pi_2\rangle = \langle h^*,1_B\rangle$, and we used to note $h^*=\varphi(h)$):
  \[
    \begin{tikzcd}
      C\times B\arrow{d}{h}&C\arrow{d}{h^*} & C\times B\arrow{d}{\langle h^*,1_B\rangle} & A^B\times B\arrow{d}{\varepsilon}\\
      A & A^B = B\to A & A^B\times B & A 
    \end{tikzcd}
  \]

  therefore, putting it all together, and remembering the \emph{evaluation} fashion of $\varepsilon$ (i.e., we have that the following diagram commutes. The 

  \[
    \begin{tikzcd}
      C\times B\arrow{d}{h} \arrow{r}{\langle h^*,1_B\rangle}& A^B\times B \arrow[swap]{dl}{\varepsilon}\\
      A&
    \end{tikzcd}
  \]

  
  To do the converse, is enough to made the same pairings and apply the notions of universality of $\varepsilon$ in  and apply \ref{prop:equivdefinition} to check that such adjoints are define via $\arepsilon$.
\end{proof}

These propositions allow us to easily define graph completions to generate a to generate from these CCCs and positive conjunction calculus.

\begin{proposition} A \emph{closed bicartesian category} is a deduction system that is both a intuitionistic propositional calculus and a category, with the additional equations:
  \begin{enumerate}
  \item $f:\bot \to A \implies f=\square_A$.
  \item Given $[f_1,f_2] : A\lor B \to C$ then $ [f_1,f_2]\circ \iin_i  = f_i$.
  \item Given $h:A\lor B\to C$ we have that $[ h\iin_1, h\iin_2] = h$.
  \end{enumerate}
\end{proposition}
\begin{remark}
  Is usual to denote $A\lor B$ as $A+B$ or $A\sqcup B$, as we are working with the coproduct.
\end{remark} 
\begin{proof}
  We have proved that it is already a closed cartesian category. Extra considerations are dual to does already considered for a cartesian category.
\end{proof}
\subsection{Adjoint of hypotheses}

We will now proceed to talk about unfinished products. This is as simple as asking: what would happen if this new truth existed? Or to put it another way in our new language, what if this new arrow were embedded in our graph. We will now study these inclusions and their consequences.\\

To do this, we are going to use the properties of the adjoint that is generated between the forgetful functor $\mathcal U$ and the free category $\mathcal{F}$ functor.{\color {red} add example in chapter 2}.\\



\begin{definition}[Category of closed cartesian categories]
\end{defintion}
\begin{proposition}
  Given a cartesian closed category A and any graph morpshim $F: G \to \mathcal U(A)$ there is a unique morsphism in $Cart$  
\end{proposition}

\section{Categorical understanding of simply typed $\lambda$-calculus}
\subsection{Natural Numbers}


We begin this section by motivating the introduction of natural numbers. The importance of these is that we want a computacoin system. These systems, in a modern practical case, are actually intended to compute a function from the natural numbers to the natural numbers (either on a tape in a turing machine, a recursion as in Gödel's computational system, or an abstract formalization in $\lambda$-calculus).

We have already seen how natural numbers can be done in untyped calculus. However in this section we will approach the problem, formalizing the notion for typed calculus and introducing the concept of natural numbers in categories.

\subsubsection{Natural Numbers in Categories}


\begin{definition}
  Given a closed cartesian category $C$,  $(N,S:N\to N)\in Ob(C)\times Ar(C)$ is said to be a \emph{natural number} when, for every $f:A\to A\in C$, there is an unique $h$ such that
\[
  \begin{tikzcd}
    1\arrow{dr}{a}\arrow{r}{0} & N\arrow{r}{S}\arrow[dashed]{d}{h} & N\arrow[dashed]{d}{h}\\
    & A\arrow{r}{f} & A
  \end{tikzcd}
\]
When $h$ exists but is not necessarily unique $(N,S)$ is said to be a \emph{weak natural number}.
\end{definition}

We can consider natural numbers as an initial object. Having a closed cartesian category $C$, we can consider it as a marked category $C_*$, such as in $Set_*$, with the specified object being $\top =1$. We can also consider the category $J$ provided by the diagram:

\[
  \begin{tikzcd}
    1\arrow{r}{0} & N\arrow{r}{S} & N
  \end{tikzcd}
\]
with the specified point being $1$. Then considering $C_*^J$ we can see that every arrow is such that: 
\[
  \begin{tikzcd}
    1\arrow{r}{0}\arrow{d}{1_1} & N\arrow{r}{S}\arrow{d}{h} & N\arrow{d}{g}\\
    1\arrow{r}{a} & A\arrow{r}{f} & A
  \end{tikzcd}
\]
and is denoted as $(1,h,g)$. Considering the category $(C_*^J)'$ with objects as in $C_*^J$ and arrows  $\{(1,h,g)\in C_*^J: h=g\}$ we have that a natural number for $C$ is an initial object in $(C_*^J)'$. This observation allow us for a simple proposition as a consequence of proposition \ref{prop:initial}:

\begin{proposition}
  Any two natural number objects are isomorphic.
\end{proposition}

Every time natural are talked, induction have to appear in some part. The intuition of the categorical concept is that we have a object $N$ that is the set of every natural, and a successor arrow $S$. 

{\color{red} Maybe add the proposition and corollary 9.1 and 9.2 of Lambeck.}


\subsubsection{Natural Numbers in Typed $\lambda$-calculus}\label{section:natural-revisited}

As a consequence of the Curry-Howard isomorphism we have the identification between logic and lamdba-calculus. Afterwards, as we start consider different deduction system  (conjunction calculus, positive, intuitionistic) in logic, we can consider different typed $\lambda$-calculus(basic, standard, expanded), each one paired with a deduction system. Finally, we restricted these deduction systems to the world of categories these gave us also another set of paired categories (cartesian, closed cartesian, closed bicartesian).\\

Having laid the intuition of what is a natural number in category theory we can proceed to explain what a natural number is in Typed $\lambda$-calculus. Relating the notions of typed $\lambda$-calculus shown in \cite[Section 10]{lambek1988introduction}, \cite[Section 6]{selinger2008lecture} and \cite[Section 10]{cardone2006history}, we can see that it is opted by Lambek to include to simply include some structure over the basic type $\iota$ to provide with a natural number type:

\begin{remark}
  Remember that $\iota$ was a basic type with no added structure.
\end{remark}
\begin{definition}[Lambek natural numbers]
  \emph{Natural number simply type lambda-calculus} is a simply typed lamdba calculus with the added structure for raw typed $\lambda$-terms:
  \begin{align*}
    A,B, C ::= ...\ |\ \mathfrak{o}\ |\ S(A)\ |\ I_t(A,B,C);
  \end{align*}
for every type $T$, and the related typing rules:
  \begin{itemize}
  \item If $N$ is of type $\iota$ so is $S(N)$:
    $$  (S)\qquad  {\displaystyle\Gamma \vdash N:\iota \over \Gamma \vdash S(N):\iota}.$$
    In addition, $\mathfrak{o}$ is of type $\iota$:
    $$  (\mathfrak{o})\qquad  {\displaystyle\Gamma \vdash \over \Gamma \vdash \mathfrak{o}:\iota}.$$
  \item If $M: A$, $H: A\to A$ and $N\in \iota$ then we can apply $H$ to $M$, $N$ times and get a result in $A$:
        $$  (I)\qquad  {\displaystyle\Gamma \vdash N:\iota, \qquad \Gamma \vdash M:A,\qquad \Gamma \vdash H:A\to A \over \Gamma \vdash I_A(M,H,N):\iota}.$$
  \end{itemize}
\end{definition}

\begin{remark}
  Natural numbers can be define over any of the different typed $\lambda$-calculus. Thus we made a definition by addition of structure. 
\end{remark}

This option has some positive notes:
\begin{enumerate}
\item We have, as in categories, an object $N$ that is a natural number.
\item It encapsulate in formalism the properties of Church numerals in untyped $\lambda$-calculus.
\end{enumerate}

Nonetheless we have already carried out a construction over natural numbers in untyped $\lambda$-calculus. That construction is replicable in the context of typed $\lambda$-calculus.

\begin{definition}[Church numerals in typed lamdba-calculi]
  Let We define the $n$th Church numeral in typed $\lambda$-calculi as, for a type $t$:
  $$\overline n^t = \lambda f^{t \to t}. \lambda x^{t}. f^{n}(x).$$
  
\end{definition}
We can deduce this simple proposition:
\begin{proposition}
  $\overline n^t$ is of type $(t\to t)\to(t\to t)$.
\end{proposition}

As a consequence of this proposition, we can consider a type $N$ such that each natural numbers $\overline n^t:N$. Nonetheless:
\begin{enumerate}

\item To have a similar behaviour of multiple application of a function, the natural numbers are dependent on the type. So to speak, there is a natural number family for each type $t$.
\item There is no type exclusively for natural numbers, as not necessarily every element of $(t\to t)\to(t\to t)$ is a natural number.
\item On the plus side, we have the tools to make both a term $S$ and a term $I_t$ in the same manner as it was done in untyped $\lambda$-calculus. \\
\end{enumerate}
From this point on, we will use the Lambek description of natural numbers, letting Church numerals as a construction for untyped $\lambda$-calculus.\\

Lastly, we can consider the effect of lambeck description in $\beta$-reduction.

\subsection{Category of typed $\lambda$-calculus}

The objective of this section is to finish forming an idea that has been present for some time in this work: the existence of several $\lambda$-calculations. \\

In the previous chapter, we have formalized the idea of having different $\lambda$-calculus, seeing it as a structure. We may continue by defining the category of $\lambda$-calculus. For that we first define the concept of morphism as a structure preserving mapping.



\begin{definition}[Morphisms of lambda-calculus]
  Let $\Lambda, \Lambda '$ be $\lambda$-calculus. A morphism $F: \Lambda \to \Lambda '$ is a function that
  \begin{enumerate}
  \item Maps types in $\Lambda$ to types in $\Lambda '$.
  \item Maps Terms in $\Lambda$ to terms in $\Lambda '$.
  \item Preserves structures $\to, \times, \pi, ...$
  \item Preserves $\alpha\beta\eta$-equivalence.
  \item If $a\in \Lambda$ is a closed term, so is $F(a)$.
\end{enumerate}
\end{definition}
\begin{remark}
We let the structure part undefined, as we can consider a morphism of the different lamdba calculus structures previously defined.
\end{remark}


\begin{definition}[Category of lambda-calculus]
  We can define the category of minimal (resp. basic, expanded) typed $\lambda$-calculus  as the category that:
  \begin{itemize}
  \item Have as objects the different minimal (resp. basic, expanded) typed $\lambda$-calculus.
  \item Have as arrow the $\lambda$-calculus morphisms.
\end{definition}

\subsection{A language from a Closed Cartesian Category}

Up to this moment, we have related that a closed cartesian category is a positive intuitionistic calculus, that is equivalent to  typed $\lambda$-calculus, with some extra structure. The idea is now clear: we are going to generate a typed $\lambda$-calculus from a closed cartesian category. Now, we are going to deduce the existence of the internal language.\\

\begin{definition}
  Let $C$ be a closed cartesian category. Then its \emph{internal language} $\LL (A)$ is the $\lambda$-calculus that:
\begin{itemize}
\item Has as types the objects of $C$, with the following pairing:

\begin{table}[!h]
\begin{center}
\begin{tabular}{|l|c|c|}
\hline
  Typing name & Types  & Closed cartesian categories  \\
  \hline
  Minimal     & Function type $A\to B$   &  Exponential object $B^A$  \\
  \hline 
  Basic      & Type 1 & Terminal object $T$ \\
             & Product type $\times$ & Product object $\land$ \\
\hline
\end{tabular}
\caption*{\label{tab:table-name} Pairing of Types and object in Closed cartesian categories.}
\end{center}
\end{table}

\item  Has as terms of type $A$ the polynomials expressions $\varphi(x_1,..,x_n): \Top \to A$ that are obtained by the indeterminates $1\to x$ and the preexiting arrows $1\to A\in Ar(C)$.
\item Has equality induced by:
  \begin{itemize}
  \item TODO: Unify the notions of $\beta$ equivalence and lambek equality.
  \end{itemize}
\end{definition}

\begin{remark}
  Lets unpack the definition of terms. In any simply typed $\lambda$-calculus, we consider raw terms and then we consider only those that are subject to be typable. This, was later understood as any term being a proof of veracity of a type, via the Curry-Howard isomorphism. So, to maintain this idea of the arrows of the language being proof of veracity, we see them as arrows $f:\top \to A$, that is, as deduction from truth.
 \end{remark}


 In fact, $\LL $ can be defined as a categori from $CCart$ to $\LC$. 



\subsubsection{Equivalence}
After defining $L$ we want to show that it is an equivalence of categories. We shall obtain a functor $C$ in the opposite direction.  

% \subsubsection{Deduction Theorem}
% We proceed with the tating that an arrow $f:\top \to A$ does exists in our deduction system. It can be deduced in both positive (without $\lor$ and $\bot$) an intuitionistic calculus that is $A \land B\vdash C$ then $A \vdash C\to B$. This theorem is more interesting to state in the new optics of deduction systems:
% \begin{theorem}[Proposition 2.1, \cite{lambek1988introduction}]
%   In a positive  calculus, if assuming the existence of an arrow $f:\top \to A$ implies the existence of an arrow $g: B\to C$, then there exists an arrow $h: A\land B\to C$ that does not depend on $f$.
% \end{theorem}

% \begin{sproof}
%   In a similar fashion of the Church-Rosser Theorem, it is solved by induction in the last rule used in the deduction.
% \end{sproof}


% As we have seen, a category is a deductive system with added structure.


